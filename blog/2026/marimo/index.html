<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> a post with marimo notebooks | You R. Name </title> <meta name="author" content="You R. Name"> <meta name="description" content="embedding interactive marimo notebooks in your blog posts"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' data: https:; media-src 'self' https:; frame-src 'self' https:; connect-src 'self' https:;"> <link rel="stylesheet" href="/al-folio/assets/css/bootstrap.min.css?v=a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/al-folio/assets/css/academicons.min.css?v=f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/al-folio/assets/css/scholar-icons.css?v=62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/al-folio/assets/css/jekyll-pygments-themes-github.css?v=591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/al-folio/assets/css/main.css?v=d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://alshedivat.github.io/al-folio/blog/2026/marimo/"> <script src="/al-folio/assets/js/theme.js?v=5fea5159b787642c1bbc1f334d60f883"></script> <link defer rel="stylesheet" href="/al-folio/assets/css/jekyll-pygments-themes-native.css?v=5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/al-folio/"> <span class="font-weight-bold">You</span> R. Name </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/al-folio/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/al-folio/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/al-folio/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/al-folio/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/al-folio/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/al-folio/cv/">CV </a> </li> <li class="nav-item "> <a class="nav-link" href="/al-folio/teaching/">teaching </a> </li> <li class="nav-item "> <a class="nav-link" href="/al-folio/people/">people </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/al-folio/books/">bookshelf</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/al-folio/blog/">blog</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="fa-solid fa-magnifying-glass"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-half-sun-moon" id="light-toggle-system"></i> <i class="fa-solid fa-moon" id="light-toggle-dark"></i> <i class="fa-solid fa-sun" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">a post with marimo notebooks</h1> <p class="post-meta"> Created on February 11, 2026 </p> <p class="post-tags"> <a href="/al-folio/blog/2026"> <i class="fa-solid fa-calendar fa-sm"></i> 2026 </a> ¬† ¬∑ ¬† <a href="/al-folio/blog/tag/formatting"> <i class="fa-solid fa-hashtag fa-sm"></i> formatting</a> ¬† <a href="/al-folio/blog/tag/notebooks"> <i class="fa-solid fa-hashtag fa-sm"></i> notebooks</a> ¬† <a href="/al-folio/blog/tag/interactive"> <i class="fa-solid fa-hashtag fa-sm"></i> interactive</a> ¬† ¬∑ ¬† <a href="/al-folio/blog/category/sample-posts"> <i class="fa-solid fa-tag fa-sm"></i> sample-posts</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p><a href="https://marimo.io/" rel="external nofollow noopener" target="_blank">marimo</a> is a reactive Python notebook that runs in the browser via WebAssembly. You can embed interactive marimo notebooks directly in your blog posts ‚Äî readers can run and edit Python code without installing anything.</p> <p>al-folio supports two ways to embed marimo notebooks:</p> <ol> <li> <strong>Inline snippets</strong> ‚Äî write Python code directly in your post that becomes interactive</li> <li> <strong>Iframe embeds</strong> ‚Äî embed hosted marimo notebooks from <a href="https://marimo.app" rel="external nofollow noopener" target="_blank">marimo.app</a> </li> </ol> <h2 id="inline-marimo-snippets">Inline marimo snippets</h2> <p>The simplest approach is to write Python code blocks directly in your post. When <code class="language-plaintext highlighter-rouge">marimo: true</code> is set in the frontmatter, the <code class="language-plaintext highlighter-rouge">marimo-snippets</code> library is loaded automatically and converts your code blocks into interactive notebooks running via WebAssembly.</p> <p>Wrap your code in a <code class="language-plaintext highlighter-rouge">&lt;div&gt;</code> with class <code class="language-plaintext highlighter-rouge">marimo-notebook-inline</code> and <code class="language-plaintext highlighter-rouge">markdown="1"</code>. Each fenced code block becomes a separate cell in the notebook:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"marimo-notebook-inline"</span> <span class="na">markdown=</span><span class="s">"1"</span><span class="nt">&gt;</span>

```python
import marimo as mo
```

```python
name = mo.ui.text(placeholder="your name", label="Enter your name:")
name
```

```python
mo.md(f"Hello, **{name.value or 'stranger'}**! üëã") if name.value else mo.md("Type your name above!")
```

<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div> <p>This produces the following interactive notebook ‚Äî type your name and see the greeting update in real time! Powered entirely by WebAssembly in your browser, no server needed:</p> <div class="marimo-notebook-inline"> <div class="language-python highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">marimo</span> <span class="k">as</span> <span class="n">mo</span>
</code></pre></div> </div> <div class="language-python highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="n">name</span> <span class="o">=</span> <span class="n">mo</span><span class="p">.</span><span class="n">ui</span><span class="p">.</span><span class="nf">text</span><span class="p">(</span><span class="n">placeholder</span><span class="o">=</span><span class="sh">"</span><span class="s">your name</span><span class="sh">"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">"</span><span class="s">Enter your name:</span><span class="sh">"</span><span class="p">)</span>
<span class="n">name</span>
</code></pre></div> </div> <div class="language-python highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="n">mo</span><span class="p">.</span><span class="nf">md</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Hello, **</span><span class="si">{</span><span class="n">name</span><span class="p">.</span><span class="n">value</span> <span class="ow">or</span> <span class="sh">'</span><span class="s">stranger</span><span class="sh">'</span><span class="si">}</span><span class="s">**! üëã</span><span class="sh">"</span><span class="p">)</span> <span class="k">if</span> <span class="n">name</span><span class="p">.</span><span class="n">value</span> <span class="k">else</span> <span class="n">mo</span><span class="p">.</span><span class="nf">md</span><span class="p">(</span><span class="sh">"</span><span class="s">Type your name above!</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div> </div> </div> <h3 id="merging-code-blocks-with-markdown-cells">Merging code blocks with markdown cells</h3> <p>You can also include markdown cells alongside Python cells:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"marimo-notebook-inline"</span> <span class="na">data-height=</span><span class="s">"600px"</span> <span class="na">markdown=</span><span class="s">"1"</span><span class="nt">&gt;</span>

```md
# Introduction

You can also add markdown cells to your notebooks.
```

```python
import marimo as mo
```

```python
slider = mo.ui.slider(1, 10)
slider
```

```python
slider.value * "üçÉ"
```

<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div> <p>Result:</p> <div class="marimo-notebook-inline" data-height="600px"> <div class="language-md highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="gh"># Introduction</span>

You can also add markdown cells to your notebooks.
</code></pre></div> </div> <div class="language-python highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">marimo</span> <span class="k">as</span> <span class="n">mo</span>
</code></pre></div> </div> <div class="language-python highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="n">slider</span> <span class="o">=</span> <span class="n">mo</span><span class="p">.</span><span class="n">ui</span><span class="p">.</span><span class="nf">slider</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">slider</span>
</code></pre></div> </div> <div class="language-python highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="n">slider</span><span class="p">.</span><span class="n">value</span> <span class="o">*</span> <span class="sh">"</span><span class="s">üçÉ</span><span class="sh">"</span>
</code></pre></div> </div> </div> <h2 id="iframe-embeds">Iframe embeds</h2> <p>For more complex notebooks, you can host them on <a href="https://marimo.app" rel="external nofollow noopener" target="_blank">marimo.app</a> and embed them via iframe using the <code class="language-plaintext highlighter-rouge">marimo.liquid</code> include:</p> <div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">{%</span><span class="w"> </span><span class="nt">include</span><span class="w"> </span>marimo.liquid<span class="w"> </span><span class="na">src</span><span class="o">=</span><span class="s2">"https://marimo.app/l/YOUR_NOTEBOOK_ID"</span><span class="w"> </span><span class="cp">%}</span>
</code></pre></div></div> <p>Here is a hosted notebook from the marimo team:</p> <figure class="marimo-notebook"> <div class="marimo-embed-container"> <iframe src="https://marimo.app/l/c7h6pz?embed=true&amp;mode=read" sandbox="allow-scripts allow-same-origin allow-downloads allow-popups" allow="microphone" allowfullscreen="" width="100%" height="400px" frameborder="0" loading="lazy" title="Marimo notebook"></iframe> </div> <figcaption class="caption">A hosted marimo notebook</figcaption> </figure> <p>You can also customize the embed:</p> <div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">{%</span><span class="w"> </span><span class="nt">include</span><span class="w"> </span>marimo.liquid<span class="w"> </span><span class="na">src</span><span class="o">=</span><span class="s2">"https://marimo.app/l/YOUR_NOTEBOOK_ID"</span><span class="w"> </span><span class="na">height</span><span class="o">=</span><span class="s2">"800px"</span><span class="w"> </span><span class="na">mode</span><span class="o">=</span><span class="s2">"edit"</span><span class="w"> </span><span class="na">caption</span><span class="o">=</span><span class="s2">"My interactive notebook"</span><span class="w"> </span><span class="cp">%}</span>
</code></pre></div></div> <h3 id="include-parameters">Include parameters</h3> <table> <thead> <tr> <th>Parameter</th> <th>Default</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">src</code></td> <td>‚Äî</td> <td>URL of the hosted marimo notebook <strong>(required)</strong> </td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">height</code></td> <td><code class="language-plaintext highlighter-rouge">"600px"</code></td> <td>Height of the iframe</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">width</code></td> <td><code class="language-plaintext highlighter-rouge">"100%"</code></td> <td>Width of the iframe</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">mode</code></td> <td><code class="language-plaintext highlighter-rouge">"read"</code></td> <td> <code class="language-plaintext highlighter-rouge">"read"</code> (read-only) or <code class="language-plaintext highlighter-rouge">"edit"</code> (editable)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">embed</code></td> <td><code class="language-plaintext highlighter-rouge">true</code></td> <td>Append <code class="language-plaintext highlighter-rouge">embed=true</code> query parameter</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">caption</code></td> <td>‚Äî</td> <td>Caption text displayed below the notebook</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">title</code></td> <td>‚Äî</td> <td>Accessible title for the iframe</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">class</code></td> <td>‚Äî</td> <td>Additional CSS classes</td> </tr> </tbody> </table> <h2 id="setting-up-your-own-post">Setting up your own post</h2> <p>To add marimo notebooks to your blog post:</p> <ol> <li>Add <code class="language-plaintext highlighter-rouge">marimo: true</code> to your post‚Äôs frontmatter ‚Äî this loads the <code class="language-plaintext highlighter-rouge">marimo-snippets</code> library</li> <li>For inline snippets, wrap Python code blocks in <code class="language-plaintext highlighter-rouge">&lt;div class="marimo-notebook-inline" markdown="1"&gt;</code> </li> <li>For iframe embeds, use <code class="language-plaintext highlighter-rouge">{% include marimo.liquid src="..." %}</code> </li> </ol> <p>That‚Äôs it! Your readers get a fully interactive Python environment right in their browser.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="https://blog.google/technology/ai/google-gemini-update-flash-ai-assistant-io-2024/" target="_blank" rel="external nofollow noopener">Google Gemini updates: Flash 1.5, Gemma 2 and Project Astra</a> <svg width="1rem" height="1rem" viewbox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"> <path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path> </svg> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="https://medium.com/@al-folio/displaying-external-posts-on-your-al-folio-blog-b60a1d241a0a?source=rss-17feae71c3c4------2" target="_blank" rel="external nofollow noopener">Displaying External Posts on Your al-folio Blog</a> <svg width="1rem" height="1rem" viewbox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"> <path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path> </svg> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/al-folio/blog/2025/plotly/">a post with plotly.js</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/al-folio/blog/2024/photo-gallery/">a post with image galleries</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/al-folio/blog/2024/tabs/">a post with tabs</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> ¬© Copyright 2026 You R. Name. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/al-folio/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/al-folio/assets/js/masonry.js?v=a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/al-folio/assets/js/zoom.js?v=85ddb88934d28b74e78031fd54cf8308"></script> <script src="/al-folio/assets/js/no_defer.js?v=2781658a0a2b13ed609542042a859126"></script> <script defer src="/al-folio/assets/js/common.js?v=c15de51d4bb57887caa2c21988d97279"></script> <script defer src="/al-folio/assets/js/copy_code.js?v=c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/al-folio/assets/js/jupyter_new_tab.js?v=d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/al-folio/assets/js/mathjax-setup.js?v=a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/al-folio/assets/js/progress-bar.js?v=2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/al-folio/assets/js/vanilla-back-to-top.min.js?v=f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/al-folio/assets/js/search/ninja-keys.min.js?v=a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/al-folio/assets/js/search-setup.js?v=6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/al-folio/assets/js/search-data.js"></script> <script src="/al-folio/assets/js/shortcut-key.js?v=ccc841c459bfc0e64c1c2b5acd10df02"></script> <script>
    document.addEventListener('DOMContentLoaded', function () {
      // 1. Convert .marimo-notebook-inline divs into <marimo-iframe> elements.
      //    kramdown (with markdown="1") has already converted fenced code blocks
      //    to <pre><code> elements which survive HTML minification.
      document.querySelectorAll('.marimo-notebook-inline').forEach(function (div) {
        var frame = document.createElement('marimo-iframe');
        // Copy data attributes (e.g. data-height) to the marimo-iframe
        Array.prototype.forEach.call(div.attributes, function (attr) {
          if (attr.name.startsWith('data-')) {
            frame.setAttribute(attr.name, attr.value);
          }
        });
        // Move <pre> elements into the marimo-iframe, copying the language
        // class from the kramdown wrapper so marimo-snippets can still
        // distinguish Python cells from markdown cells.
        // We avoid moving the whole .highlighter-rouge wrapper because its
        // nested divs create text-node whitespace that marimo-snippets reads
        // as blank first/last lines via .textContent.
        var wrappers = Array.from(div.querySelectorAll('.highlighter-rouge'));
        if (wrappers.length > 0) {
          wrappers.forEach(function (wrapper) {
            // Extract language class (e.g. "language-python") from the wrapper
            var langClass = '';
            wrapper.classList.forEach(function (cls) {
              if (cls.startsWith('language-')) langClass = cls;
            });
            var pre = wrapper.querySelector('pre');
            if (pre) {
              // Copy language class onto the <pre> so marimo-snippets detects it
              if (langClass) pre.classList.add(langClass);
              // Trim leading/trailing whitespace from <code> content
              pre.querySelectorAll('code').forEach(function (c) {
                c.textContent = c.textContent.replace(/^\n+/, '').replace(/\s+$/, '');
              });
              frame.appendChild(pre);
            }
          });
        } else {
          // Fallback: move <pre> elements directly
          var pres = Array.from(div.querySelectorAll('pre'));
          pres.forEach(function (pre) {
            pre.querySelectorAll('code').forEach(function (c) {
              c.textContent = c.textContent.replace(/^\n+/, '').replace(/\s+$/, '');
            });
            frame.appendChild(pre);
          });
        }
        // Clear the div and insert the marimo-iframe
        div.innerHTML = '';
        div.appendChild(frame);
        div.style.visibility = 'visible';
      });

      // 2. Fallback: parse fenced code blocks from raw text for <marimo-iframe>
      //    elements that don't already contain <pre> children (e.g. local dev
      //    without minification).
      document.querySelectorAll('marimo-iframe').forEach(function (frame) {
        if (frame.querySelector('pre')) return;
        var text = frame.textContent;
        var blocks = [];
        var regex = /```(\w*)\n([\s\S]*?)```/g;
        var match;
        while ((match = regex.exec(text)) !== null) {
          blocks.push({ lang: match[1] || 'python', code: match[2].replace(/\n$/, '') });
        }
        if (blocks.length > 0) {
          frame.innerHTML = '';
          blocks.forEach(function (b) {
            var pre = document.createElement('pre');
            var code = document.createElement('code');
            code.className = 'language-' + b.lang;
            code.textContent = b.code + '\n';
            pre.appendChild(code);
            frame.appendChild(pre);
          });
        }
        frame.style.visibility = 'visible';
      });

      // 3. Auto-calculate iframe height when data-height is not set
      document.querySelectorAll('marimo-iframe').forEach(function (frame) {
        if (frame.hasAttribute('data-height')) return;
        var cells = frame.querySelectorAll('pre');
        var totalLines = 0;
        cells.forEach(function (cell) {
          totalLines += (cell.textContent || '').split('\n').filter(Boolean).length;
        });
        var height = Math.max(300, 150 + cells.length * 80 + totalLines * 22);
        frame.setAttribute('data-height', height + 'px');
      });
    });
  </script> <script src="https://cdn.jsdelivr.net/npm/@marimo-team/marimo-snippets@1"></script> </body> </html>